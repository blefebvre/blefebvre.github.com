<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: SSL, | Bruce Lefebvre]]></title>
  <link href="https://brucelefebvre.com/blog/categories/ssl/atom.xml" rel="self"/>
  <link href="https://brucelefebvre.com/"/>
  <updated>2018-10-12T22:48:08-04:00</updated>
  <id>https://brucelefebvre.com/</id>
  <author>
    <name><![CDATA[Bruce Lefebvre]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Using SSL locally for AEM dev]]></title>
    <link href="https://brucelefebvre.com/blog/2015/08/19/using-ssl-locally-for-aem-development/"/>
    <updated>2015-08-19T00:02:00-04:00</updated>
    <id>https://brucelefebvre.com/blog/2015/08/19/using-ssl-locally-for-aem-development</id>
    <content type="html"><![CDATA[<h3>Goal</h3>

<p><img src="/images/ssl-pub/ssl-geo.png" title="'Publish instance with an untrusted cert in action'" ></p>

<p>Set up an AEM publish instance with SSL to enable local, OS X-based development on <code>:8443</code>. These instructions are deliberately concise and not designed to be used in prod (refer to the <a href="https://docs.adobe.com/docs/en/aem/6-0/deploy/configuring/config-ssl.html">official docs</a> for that).</p>

<h3>You will need</h3>

<ul>
<li>An AEM publish instance (accessible - for the moment - on <code>:4503</code>)</li>
<li>A machine running OS X (the following was tested on Yosemite)</li>
</ul>


<!-- more -->


<h3>Generate keys</h3>

<p>Navigate to your publish instance's <code>crx-quickstart</code> directory:</p>

<pre><code>$ cd crx-quickstart/
</code></pre>

<p>Create an <code>ssl/</code> directory, and use <code>keytool</code> to generate your keystore file (replacing 'password' below, if desired):</p>

<pre><code>$ mkdir ssl
$ cd ssl/
$ keytool -genkeypair -keyalg RSA -validity 3650 -alias cqse -keystore cqkeystore.keystore -keypass password -storepass password
&lt;enter cert details as prompted&gt;
</code></pre>

<p>A file named 'cqkeystore.keystore' will be created in your current working directory.</p>

<h3>AEM configuration</h3>

<p>Navigate to CRX/de on your publish instance (<a href="http://localhost:4503/crx/de/index.jsp">http://localhost:4503/crx/de/index.jsp</a>) and log in with an administrator account.</p>

<p>Using the content browser, navigate to <code>/apps/</code>. Right click and create a folder called 'system', and inside this new folder create another called 'config'.</p>

<p><img src="/images/ssl-pub/create-folder.png" title="'Create folders using CRXde'" ></p>

<p>Tap 'Save All' to persist your new folders.</p>

<p>Create a new file in <code>/apps/system/config/</code> named 'org.apache.felix.http.config'. For the contents of the file, paste in the following:</p>

<pre><code>org.apache.felix.https.enable=B"true"
org.apache.felix.https.keystore="crx-quickstart/ssl/cqkeystore.keystore"
org.apache.felix.https.keystore.key.password="password"
org.apache.felix.https.truststore="crx-quickstart/ssl/cqkeystore.keystore"
org.apache.felix.https.truststore.password="password"
org.apache.felix.http.nio=B"true"
org.osgi.service.http.port.secure=I"8443"
</code></pre>

<p>If you replaced 'password' for the <code>keytool</code> command, make sure you use the same value in the above. Tap 'Save All' to persist your new config file.</p>

<h3>Try it out</h3>

<p><img src="/images/ssl-pub/ssl-unsafe.png" title="'Unsafe!'" ></p>

<p>With any luck, your https-capable publisher should now be available at <a href="https://localhost:8443/">https://localhost:8443/</a>. You may see a page warning you against servers that use untrusted certificates, but for development purposes you can hit (on Chrome) 'Advanced', and 'Proceed to localhost (unsafe)'.</p>
]]></content>
  </entry>
  
</feed>
